# æµ‹è¯•ä»»åŠ¡è·Ÿè¸ªç³»ç»Ÿ - éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬ç³»ç»Ÿæä¾›å®Œæ•´çš„æµ‹è¯•ä»»åŠ¡è·Ÿè¸ªåŠŸèƒ½ï¼ŒåŒ…æ‹¬åç«¯APIã€å‰ç«¯UIã€æ•°æ®åº“å’Œç¼“å­˜æœåŠ¡ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é¦–æ¬¡éƒ¨ç½²ï¼ˆå®Œæ•´è®¾ç½®ï¼‰

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x *.sh

# æŒ‰é¡ºåºéƒ¨ç½²æ‰€æœ‰æœåŠ¡
./deploy-infrastructure.sh
./deploy-backend.sh
./deploy-frontend.sh
./deploy-nginx.sh
```

### 2. æœåŠ¡ç®¡ç†å™¨ï¼ˆäº¤äº’å¼ç®¡ç†ï¼‰

```bash
./service-manager.sh
```

## ğŸ“ éƒ¨ç½²è„šæœ¬

### ğŸ”§ è„šæœ¬åŠŸèƒ½

| è„šæœ¬åç§° | ç”¨é€” | ä¾èµ–å…³ç³» | æ„å»ºæ—¶é—´ | æ•°æ®å®‰å…¨ |
|---------|------|----------|----------|----------|
| `deploy-infrastructure.sh` | éƒ¨ç½²MySQL + Redis | æ—  | çŸ­ | å®‰å…¨ |
| `deploy-backend.sh` | éƒ¨ç½²Spring Bootåº”ç”¨ | åŸºç¡€è®¾æ–½ | ä¸­ | å®‰å…¨ |
| `deploy-frontend.sh` | éƒ¨ç½²Vue.js + Nginx | æ—  | ä¸­ | å®‰å…¨ |
| `deploy-nginx.sh` | éƒ¨ç½²Nginxä»£ç† | æ—  | çŸ­ | å®‰å…¨ |
| `service-manager.sh` | äº¤äº’å¼ç®¡ç† | æ‰€æœ‰è„šæœ¬ | çµæ´» | å®‰å…¨ |

### ğŸ¯ æ¨èä½¿ç”¨ç­–ç•¥

1. **é¦–æ¬¡éƒ¨ç½²**: æŒ‰é¡ºåºè¿è¡Œè„šæœ¬
2. **ä»£ç æ›´æ–°**: è¿è¡Œç‰¹å®šæœåŠ¡è„šæœ¬
3. **é…ç½®ä¿®æ”¹**: ä½¿ç”¨æœåŠ¡ç®¡ç†å™¨
4. **æ—¥å¸¸è¿ç»´**: ä½¿ç”¨æœåŠ¡ç®¡ç†å™¨

## ğŸŒ è®¿é—®åœ°å€

- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **åç«¯API**: http://localhost:8080
- **Nginxä»£ç†**: http://localhost
- **MySQL**: localhost:3306
- **Redis**: localhost:6379

## ğŸ“Š æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx     â”‚    â”‚   Frontend  â”‚    â”‚     App     â”‚
â”‚   (80)      â”‚    â”‚   (3000)    â”‚    â”‚   (8080)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚            â”‚            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  MySQL  â”‚  â”‚  Redis  â”‚  â”‚  Volumesâ”‚
         â”‚ (3306)  â”‚  â”‚ (6379)  â”‚  â”‚         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æœåŠ¡ç®¡ç†

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
docker-compose -f docker-compose.prod.yml ps
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker logs test_tracking_app -f
docker logs test_tracking_frontend -f
docker logs test_tracking_mysql -f
docker logs test_tracking_redis -f
docker logs test_tracking_nginx -f
```

### é‡å¯ç‰¹å®šæœåŠ¡
```bash
# é‡å¯åç«¯æœåŠ¡
docker-compose -f docker-compose.prod.yml restart app

# é‡å¯å‰ç«¯æœåŠ¡
docker-compose -f docker-compose.prod.yml restart frontend

# é‡å¯åŸºç¡€è®¾æ–½æœåŠ¡ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
docker-compose -f docker-compose.prod.yml restart mysql redis
```

### åœæ­¢æ‰€æœ‰æœåŠ¡
```bash
docker-compose -f docker-compose.prod.yml down
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### 1. åç«¯æœåŠ¡å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
docker logs test_tracking_app --tail 50

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
docker exec test_tracking_mysql mysql -u testuser -pTestUser@2024 -e "SELECT 1;"

# æ£€æŸ¥Redisè¿æ¥
docker exec test_tracking_redis redis-cli ping
```

### 2. å‰ç«¯æœåŠ¡æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥å‰ç«¯å®¹å™¨çŠ¶æ€
docker ps | grep frontend

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
docker logs test_tracking_frontend --tail 20

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3000
```

### 3. æ•°æ®åº“è¿æ¥é—®é¢˜

```bash
# æ£€æŸ¥MySQLå®¹å™¨çŠ¶æ€
docker ps | grep mysql

# æŸ¥çœ‹MySQLæ—¥å¿—
docker logs test_tracking_mysql --tail 20

# æµ‹è¯•æ•°æ®åº“è¿æ¥
docker exec test_tracking_mysql mysql -u testuser -pTestUser@2024 -e "SHOW DATABASES;"
```

### 4. ç«¯å£å†²çª

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep -E ':(80|3000|8080|3306|6379)'

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo lsof -ti:8080 | xargs kill -9
```

## ğŸ“ é»˜è®¤é…ç½®

### æ•°æ®åº“é…ç½®
- **ä¸»æœº**: localhost:3306
- **æ•°æ®åº“**: test_tracking
- **ç”¨æˆ·å**: testuser
- **å¯†ç **: TestUser@2024
- **Rootå¯†ç **: TestTracking@2024

### åº”ç”¨é…ç½®
- **JWTå¯†é’¥**: TestTrackingSecretKey2024ProductionEnvironment
- **JWTè¿‡æœŸæ—¶é—´**: 24å°æ—¶
- **é»˜è®¤ç”¨æˆ·**: admin / admin123

### é’‰é’‰é…ç½®
- **å¯ç”¨çŠ¶æ€**: é»˜è®¤å…³é—­
- **Webhook**: éœ€è¦é…ç½®
- **å¯†é’¥**: éœ€è¦é…ç½®

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **: é¦–æ¬¡éƒ¨ç½²åç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç 
2. **é…ç½®HTTPS**: ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®SSLè¯ä¹¦
3. **é˜²ç«å¢™è®¾ç½®**: åªå¼€æ”¾å¿…è¦ç«¯å£
4. **å®šæœŸå¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®åº“æ•°æ®
5. **æ—¥å¿—ç›‘æ§**: ç›‘æ§åº”ç”¨æ—¥å¿—ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**: æ ¹æ®æ•°æ®é‡è°ƒæ•´MySQLé…ç½®
2. **ç¼“å­˜ç­–ç•¥**: åˆç†ä½¿ç”¨Redisç¼“å­˜
3. **èµ„æºé™åˆ¶**: ä¸ºå®¹å™¨è®¾ç½®åˆç†çš„èµ„æºé™åˆ¶
4. **ç›‘æ§å‘Šè­¦**: è®¾ç½®ç³»ç»Ÿç›‘æ§å’Œå‘Šè­¦

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ç›¸å…³æœåŠ¡æ—¥å¿—
2. æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
3. éªŒè¯ç½‘ç»œè¿æ¥
4. å‚è€ƒæ•…éšœæ’é™¤ç« èŠ‚
5. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

**æ³¨æ„**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰ï¼Œè¯·åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†ç å’Œæ•æ„Ÿé…ç½®ï¼ 